---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection, render } from 'astro:content';

export async function getStaticPaths() {
  const nyheter = await getCollection('nyheter');
  return nyheter.map(entry => ({
    params: { slug: entry.id },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await render(entry);
---

<BaseLayout title={entry.data.title} description={entry.data.description}>
  <article class="max-w-4xl mx-auto px-4 py-16">
    <nav class="mb-8">
      <a href="/nyheter" class="text-brand-400 hover:text-brand-600 transition-colors text-sm font-medium">
        ← Tillbaka till alla nyheter
      </a>
    </nav>
    <div class="bg-white/70 backdrop-blur-sm rounded-2xl p-8 border border-brand-100">
      <header class="mb-8">
        <h1 class="text-4xl font-bold text-brand-700 mb-4" style="font-family: 'Josefin Sans', sans-serif;">{entry.data.title}</h1>
        <div class="flex flex-wrap items-center gap-3 text-brand-400">
          <time datetime={entry.data.date.toISOString().split('T')[0]}>
            {entry.data.date.toLocaleDateString('sv-SE')}
          </time>
          {entry.data.author && <span>• {entry.data.author}</span>}
        </div>
      </header>
      <div class="prose prose-lg max-w-none prose-headings:text-brand-700 prose-a:text-brand-500">
        <Content />
      </div>
    </div>
  </article>
</BaseLayout>
